<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Novo Produto - Outcast</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; display: flex; justify-content: center; padding: 50px; }
        .form-box { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); width: 400px; }
        input, select { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .back-link { display: block; margin-top: 15px; text-align: center; color: #666; text-decoration: none; font-size: 0.9em; }
    </style>
</head>
<body>

    <div class="form-box">
        <h2>Cadastrar Novo Item</h2>
        <form action="/api/products" method="POST">
            <label>Nome do Produto:</label>
            <input type="text" name="name" placeholder="Ex: Skate Element 8.0" required>

            <label>Preço (€):</label>
            <input type="number" step="0.01" name="price" placeholder="0.00" required>

            <label>Categoria:</label>
            <select name="idCategory" id="category-select" required>
                <option value="">Carregando categorias...</option>
            </select>

            <label>Quantidade Inicial em Stock:</label>
            <input type="number" name="quantity" value="0" min="0" required>

            <button type="submit">Salvar Produto</button>
        </form>
        <a href="/admin" class="back-link">← Voltar para o Painel</a>
    </div>

    <script>
    // Agora o caminho completo é /api/products/categories
    fetch('/api/products/categories') 
        .then(res => res.json())
        .then(categories => {
            const select = document.getElementById('category-select');
            select.innerHTML = '<option value="">Selecione uma categoria</option>';
            
            categories.forEach(cat => {
                select.innerHTML += `<option value="${cat.idCategory}">${cat.type}</option>`;
            });
        })
        .catch(err => console.error("Erro ao carregar categorias:", err));
</script>
</body>
</html>